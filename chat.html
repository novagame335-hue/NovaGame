<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NovaGame — Чат</title>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <style>
        :root { --neon-red: #ff0000; --bg: #000; --panel: #111; }
        
        body, html { 
            margin: 0; padding: 0; height: 100%; width: 100%;
            background: var(--bg); color: white; font-family: sans-serif;
            overflow: hidden; /* Запрещаем общий скролл страницы */
        }

        .app-container { display: flex; width: 100%; height: 100%; position: relative; }

        /* СПИСОК ЧАТОВ */
        .side-panel {
            width: 350px; background: var(--panel); border-right: 1px solid #222;
            display: flex; flex-direction: column; z-index: 5;
        }

        /* ОКНО ЧАТА */
        .main-chat {
            flex: 1; display: flex; flex-direction: column; background: var(--bg);
            position: relative; z-index: 10;
        }

        /* Область сообщений */
        #msg-area { 
            flex: 1; overflow-y: auto; padding: 15px; 
            display: flex; flex-direction: column; gap: 10px;
            -webkit-overflow-scrolling: touch; /* Плавный скролл на iPhone */
        }

        /* ПОЛЕ ВВОДА (ГЛАВНЫЙ ФИКС) */
        .input-area { 
            padding: 12px; background: #1a1a1a; border-top: 1px solid #333;
            display: flex; gap: 10px; align-items: center;
            z-index: 999; /* Чтобы всегда было сверху */
        }

        #msg-input { 
            flex: 1; background: #000; border: 1px solid #444; 
            padding: 12px 15px; color: white; border-radius: 25px; 
            outline: none; font-size: 16px; /* 16px предотвращает авто-зум в Safari */
        }

        .send-btn { 
            background: var(--neon-red); border: none; width: 45px; height: 45px; 
            border-radius: 50%; color: white; font-size: 20px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }

        /* Сообщения */
        .msg-row { display: flex; max-width: 85%; }
        .msg-row.my { align-self: flex-end; }
        .msg-row.other { align-self: flex-start; }
        .bubble { padding: 10px 15px; border-radius: 18px; font-size: 15px; line-height: 1.4; }
        .my .bubble { background: var(--neon-red); border-bottom-right-radius: 4px; }
        .other .bubble { background: #222; border: 1px solid #333; border-bottom-left-radius: 4px; }

        /* МОБИЛЬНАЯ ВЕРСИЯ */
        @media (max-width: 768px) {
            .side-panel { width: 100%; position: absolute; left: 0; top: 0; height: 100%; }
            .main-chat { 
                position: absolute; width: 100%; height: 100%; 
                left: 100%; top: 0; transition: transform 0.3s ease;
            }
            .back-btn { display: block; background: none; border: none; color: red; font-size: 20px; padding: 10px; }
            
            body.chat-active .main-chat { transform: translateX(-100%); }
        }
    </style>
</head>
<body id="app-body">

<div class="app-container">
    <div class="side-panel">
        <div style="padding: 20px; font-weight: bold; border-bottom: 1px solid #222;">ЧАТЫ</div>
        <div id="chat-list">
             <div class="chat-item" style="padding:15px; border-bottom:1px solid #111; cursor:pointer;" onclick="document.getElementById('app-body').classList.add('chat-active')">
                Техподдержка (Нажми меня)
             </div>
        </div>
    </div>

    <div class="main-chat">
        <div style="display:flex; align-items:center; background:#1a1a1a; border-bottom:1px solid #222;">
            <button class="back-btn" onclick="document.getElementById('app-body').classList.remove('chat-active')">← Назад</button>
            <div style="padding: 15px; font-weight: bold;">Чат с поддержкой</div>
        </div>
        
        <div id="msg-area">
            </div>

        <div class="input-area">
            <input type="text" id="msg-input" placeholder="Напишите сообщение...">
            <button class="send-btn" onclick="sendMessage()">➤</button>
        </div>
    </div>
</div>

<script>
    // ТВОЯ ЛОГИКА FIREBASE ИЗ ПРЕДЫДУЩИХ ОТВЕТОВ
    // Важно: в sendMessage() добавь проверку:
    function sendMessage() {
        const input = document.getElementById('msg-input');
        const text = input.value.trim();
        if(!text) return;
        
        // Тут твой db.ref().push...
        
        input.value = '';
        input.focus(); // Чтобы клавиатура не закрывалась после отправки
    }
</script>

</body>
</html>
