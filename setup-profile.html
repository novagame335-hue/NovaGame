<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Настройка профиля — NovaGame</title>
    <style>
        body {
            margin: 0;
            background: radial-gradient(circle at center, #350101, #000000, #220101, #000000);
            background-size: 300% 300%;
            animation: smoothBG 20s ease-in-out infinite;
            font-family: 'Segoe UI', sans-serif;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        @keyframes smoothBG {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }

        .setup-card {
            background: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid #ff0000;
            text-align: center;
            width: 350px;
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.3);
        }

        .avatar-container {
            width: 130px;
            height: 130px;
            margin: 0 auto 20px;
            cursor: pointer;
            border-radius: 50%;
            border: 3px solid #ff0000;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .avatar-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.5; /* Тусклая иконка */
            transition: 0.3s;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            margin: 15px 0;
            background: #111;
            border: 1px solid #333;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            box-sizing: border-box;
            text-align: center;
            outline: none;
        }

        .save-btn {
            width: 100%;
            padding: 15px;
            background: #ff0000;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
        }

        #file-input { display: none; }
    </style>
</head>
<body>

    <div class="setup-card">
        <h2>Ваш профиль</h2>
        <p style="color: #888; font-size: 14px;">Нажмите на круг, чтобы выбрать фото</p>
        
        <div class="avatar-container" onclick="document.getElementById('file-input').click()">
            <img id="avatar-img" src="default-avatar.png" class="avatar-preview">
        </div>
        
        <input type="file" id="file-input" accept="image/*" onchange="previewFile()">
        <input type="text" id="nickname" placeholder="Ник (мин. 4 символа)" maxlength="15">
        <button class="save-btn" onclick="finishSetup()">Подтвердить</button>
    </div>

    <script>
        const badWords = [
            "хуй", "хуйня", "хуёвый", "захуярить", "пизда", "пиздец", "пиздатый", "распиздяй", "ебать", "ёбаный", "заебал", "переебать", "блядь", "блядский", "блядство", "дебил", "идиот", "придурок", "козёл", "мудак", "урод", "тварь", "чёрт", "блин", "жесть", "капец", "трындец", "фигня", "кринж", "токсик", "дичь", "дно", "зашквар", "рэд флаг", "ё-моё", "ёпрст", "пипец", "офигеть",
            "дурак", "кретин", "имбецил", "болван", "тупица", "тупой", "тормоз", "мудила", "гандон", "скотина", "ублюдок", "выродок", "вырод", "уродец", "сволочь", "мразь", "мерзавец", "подонок", "гнида", "паскуда", "сука", "сучара", "сукин сын", "падла", "чмо", "чмошник", "чмырь", "лох", "ничтожество", "никчёмный", "пустышка", "ноль", "жлоб", "хам", "быдло", "деревенщина", "псих", "неадекват", "отбитый", "предатель", "стукач", "крыса", "паразит", "дармоед", "нахлебник", "тряпка", "слабак", "трус", "наглец", "наглая рожа", "хамло", "жиртрест", "обжора", "старпёр", "маразматик", "клоун", "посмешище", "цирк", "позор", "стыдоба", "чертяка", "бес", "говно", "дерьмо"
        ];

        function previewFile() {
            const file = document.getElementById('file-input').files[0];
            const reader = new FileReader();
            const preview = document.getElementById('avatar-img');

            reader.onloadend = function() {
                preview.src = reader.result;
                preview.style.opacity = "1"; 
            }

            if (file) {
                reader.readAsDataURL(file);
            }
        }

        function finishSetup() {
            const nickInput = document.getElementById('nickname').value;
            const nickLow = nickInput.trim().toLowerCase();
            const avatarData = document.getElementById('avatar-img').src;
            
            if(nickLow.length < 4) {
                alert("Ник должен содержать минимум 4 символа!");
                return;
            }

            for (let word of badWords) {
                if (nickLow.includes(word)) {
                    // Новая табличка
                    alert("Данный ник не допустим");
                    return;
                }
            }

            localStorage.setItem('userName', nickInput);
            localStorage.setItem('userPic', avatarData);
            localStorage.setItem('isLoggedIn', 'true');

            window.location.href = "index.html";
        }
    </script>
</body>
</html>
